<%# ====== 戻って修正する（confirm に back=1 で POST）====== %>
<%= form_with url: (@facility.persisted? ? confirm_facility_path(@facility) : confirm_facilities_path),
              method: :post, scope: :facility, local: true do |f| %>
  <% facility_confirm_fields.each do |key| %>
    <%= f.hidden_field key if @facility.respond_to?(key) %>
  <% end %>
  <%= hidden_field_tag :back, 1 %>

  <%= f.submit "戻って修正する",
        class: "text-sm font-semibold text-gray-900" %>
<% end %>

<%# ====== 本送信（create / update）====== %>
<%= form_with model: @facility,
              url:    (@facility.persisted? ? facility_path(@facility) : facilities_path),
              method: (@facility.persisted? ? :patch : :post),
              local:  true do |f| %>
  <% facility_confirm_fields.each do |key| %>
    <%= f.hidden_field key if @facility.respond_to?(key) %>
  <% end %>

  <%= f.submit (@facility.persisted? ? "更新する" : "登録する"),
        class: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-500" %>
<% end %>